"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t=function(){return(t=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function n(t){return t}var r=n;function e(t){return function(){return t}}var o=e(void 0);function u(t,n,r,e,o,u,i,c,f){switch(arguments.length){case 1:return t;case 2:return function(){return n(t.apply(this,arguments))};case 3:return function(){return r(n(t.apply(this,arguments)))};case 4:return function(){return e(r(n(t.apply(this,arguments))))};case 5:return function(){return o(e(r(n(t.apply(this,arguments)))))};case 6:return function(){return u(o(e(r(n(t.apply(this,arguments))))))};case 7:return function(){return i(u(o(e(r(n(t.apply(this,arguments)))))))};case 8:return function(){return c(i(u(o(e(r(n(t.apply(this,arguments))))))))};case 9:return function(){return f(c(i(u(o(e(r(n(t.apply(this,arguments)))))))))}}}function i(t,n,r,e,o,u,i,c,f,a,s,p,l,m,h,v,d,y,g,O){switch(arguments.length){case 1:return t;case 2:return n(t);case 3:return r(n(t));case 4:return e(r(n(t)));case 5:return o(e(r(n(t))));case 6:return u(o(e(r(n(t)))));case 7:return i(u(o(e(r(n(t))))));case 8:return c(i(u(o(e(r(n(t)))))));case 9:return f(c(i(u(o(e(r(n(t))))))));case 10:return a(f(c(i(u(o(e(r(n(t)))))))));case 11:return s(a(f(c(i(u(o(e(r(n(t))))))))));case 12:return p(s(a(f(c(i(u(o(e(r(n(t)))))))))));case 13:return l(p(s(a(f(c(i(u(o(e(r(n(t))))))))))));case 14:return m(l(p(s(a(f(c(i(u(o(e(r(n(t)))))))))))));case 15:return h(m(l(p(s(a(f(c(i(u(o(e(r(n(t))))))))))))));case 16:return v(h(m(l(p(s(a(f(c(i(u(o(e(r(n(t)))))))))))))));case 17:return d(v(h(m(l(p(s(a(f(c(i(u(o(e(r(n(t))))))))))))))));case 18:return y(d(v(h(m(l(p(s(a(f(c(i(u(o(e(r(n(t)))))))))))))))));case 19:return g(y(d(v(h(m(l(p(s(a(f(c(i(u(o(e(r(n(t))))))))))))))))));case 20:return O(g(y(d(v(h(m(l(p(s(a(f(c(i(u(o(e(r(n(t)))))))))))))))))))}}var c=function(t,n){for(var r=0,e=n.length,o=t.length;r<e;r++,o++)t[o]=n[r];return t},f=Object.prototype.hasOwnProperty,a=function(t){return"Left"===t._tag},s=function(t){return{_tag:"Left",left:t}},p=function(t){return{_tag:"Right",right:t}},l=function(t,n){return function(r){return a(r)?t(r.left):n(r.right)}},m=function(t){return function(n){return a(n)?t(n.left):n.right}},h=function(t){return function(n){return a(n)?n:t(n.right)}},v=function(t){return"None"===t._tag},d={_tag:"None"},y=function(t){return{_tag:"Some",value:t}};function g(t){return function(n){return t(n)?y(n):d}}function O(t){return"Left"===t._tag?d:y(t.right)}var w=O,F=function(t,n){return function(r){return v(r)?t():n(r.value)}},S=function(t){return function(n){return v(n)?t():n.value}},_=S,P=function(t){return null==t?d:y(t)},b=function(t){return function(n){return v(n)?d:y(t(n.value))}},E=function(t){return function(n){return v(n)?d:t(n.value)}},N=function(t){return function(n){return v(n)?t():n}};var x=function(t,n){return i(t,b(n))},j={equals:function(t,n){return t===n}},G=function(t){var n=M(t);return function(t,r){var e=n(t);return function(n){var o,u=e(n);return v(u)?((o=new Map(n)).set(t,r),o):u.value[1]!==r?((o=new Map(n)).set(u.value[0],r),o):n}}};function M(t){return function(n,r){if(void 0===r){var e=M(t);return function(t){return e(n,t)}}for(var o,u=r.entries();!(o=u.next()).done;){var i=o.value,c=i[0],f=i[1];if(t.equals(c,n))return y([c,f])}return d}}var k,I=function(t,n){return function(t,n){for(var r,e=new Map,o=t.entries();!(r=o.next()).done;){var u=r.value,i=u[0],c=u[1];e.set(i,n(i,c))}return e}(t,(function(t,r){return n(r)}))},L=(k=void 0,{concat:function(t,n){return t&&n},empty:!0}),T={concat:function(t,n){return t||n},empty:!1},A=j,K=function(t){return 0===t.length},U=i,C=function(t,n){return{_tag:"Concat",left:t,right:n}};function z(){return{concat:C}}var D={is:function(t){return"string"==typeof t}},R={is:function(t){return"boolean"==typeof t}};var Y=z(),q={URI:"Either",_E:void 0,map:function(t,n){return U(t,function(t){return function(n){return a(n)?n:p(t(n.right))}}(n))},ap:function(t,n){return a(t)?a(n)?s(Y.concat(t.left,n.left)):t:a(n)?n:p(t.right(n.right))},of:p,chain:function(t,n){return U(t,h(n))},throwError:s,bimap:function(t,n,r){return U(t,function(t,n){return function(r){return a(r)?s(t(r.left)):p(n(r.right))}}(n,r))},mapLeft:function(t,n){return U(t,function(t){return function(n){return a(n)?s(t(n.left)):n}}(n))},alt:function(t,n){if("Right"===t._tag)return t;var r=n();return a(r)?s(Y.concat(t.left,r.left)):r}},B=function(t,n){return function(t,n){return function(t){return function(n,r){return{decode:function(e){return n(e)?t.of(e):t.throwError(r(e))}}}}(q)(t,(function(t){return function(t){return{_tag:"Of",value:t}}(function(t,n){return{_tag:"Leaf",actual:t,error:n}}(t,n))}))}(t.is,n)},$=B(D,"string"),J=B(R,"boolean"),W=function(t,n,r){if(r[t]===n)return r;var e=function(t){return c([t[0]],t.slice(1))}(r);return e[t]=n,e},H=function(t){return t.length>0},Q=function(t,n){return t<0||t>=n.length};function V(t,n){return void 0===n?function(n){return V(t,n)}:Q(t,n)?d:y(n[t])}var X=function(t){return function(n){for(var r=0;r<n.length;r++)if(t(n[r]))return y(r);return d}};function Z(t){return function(n){for(var r=0;r<n.length;r++)if(t(n[r]))return y(n[r]);return d}}var tt=function(t,n,r){return H(r)?W(t,n,r):r},nt=function(t){return[t]},rt=r;function et(t){var n,r=(n=t,{URI:it,_E:void 0,map:ot,ap:function(t,r){return rt(n.concat(t,r))}});return{URI:it,_E:void 0,map:r.map,ap:r.ap,of:function(){return rt(t.empty)}}}var ot=function(t,n){return i(t,ut(n))},ut=function(){return r},it="Const";function ct(t,n){return void 0===n?function(n){return ct(t,n)}:f.call(n,t)?y(n[t]):d}var ft=function(t,n){return function(r){if(f.call(r,t)&&r[t]===n)return r;var e=Object.assign({},r);return e[t]=n,e}},at=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;var e=Array(t),o=0;for(n=0;n<r;n++)for(var u=arguments[n],i=0,c=u.length;i<c;i++,o++)e[o]=u[i];return e},st=function(t){return pt(t.get,u(t.reverseGet,e))},pt=function(t,n){return{get:t,set:n}},lt=function(t){return Pt(u(t.get,y),t.set)},mt=function(t){return function(n){return pt((function(r){return t.get(n.get(r))}),(function(r){return function(e){return n.set(t.set(r)(n.get(e)))(e)}}))}},ht=function(t,n){return{getOption:t,reverseGet:n}},vt=function(t){return Pt(t.getOption,(function(n){return gt(n)(t)}))},dt=function(t){return jt((function(n){return function(r){return function(e){return U(t.getOption(e),F((function(){return n.of(e)}),(function(o){return n.map(r(o),(function(n){return gt(n)(t)(e)}))})))}}}))},yt=function(t){return function(n){var r=function(t){return function(n){return function(r){return U(n.getOption(r),b((function(e){var o=t(e);return o===e?r:n.reverseGet(o)})))}}}(t)(n);return function(t){return U(r(t),_((function(){return t})))}}},gt=function(t){return yt((function(){return t}))},Ot=function(){return ht(P,n)},wt=function(t){return ht(g(t),n)},Ft=function(){return ht(n,y)},St=function(){return ht(w,p)},_t=function(){return ht((function(t){return a(t)?y(t.left):d}),s)},Pt=function(t,n){return{getOption:t,set:n}},bt=function(t){return function(n){return function(r){return U(n.getOption(r),b((function(e){var o=t(e);return o===e?r:n.set(o)(r)})))}}},Et=function(t){return function(n){var r=bt(t)(n);return function(t){return U(r(t),_((function(){return t})))}}},Nt=function(t){return function(n){return Pt(u(n.getOption,E(t.getOption)),(function(r){return Et(t.set(r))(n)}))}},xt=function(t,n,r){if(r[t]===n)return r;var e=at([r[0]],r.slice(1));return e[t]=n,e},jt=function(t){return{modifyF:t}};function Gt(t){return function(n){return jt((function(r){return function(e){return n.modifyF(r)(t.modifyF(r)(e))}}))}}var Mt={URI:"Identity",map:function(t,n){return n(t)},of:n,ap:function(t,n){return t(n)}};function kt(t){return Gt(function(t){return function(){return jt((function(n){var r=function(t){return"Identity"===t.URI}(n)?t.map:t.traverse(n);return function(t){return function(n){return r(n,t)}}}))}}(t)())}var It=function(t){return{index:t}},Lt=function(){return It((function(t){return Pt((function(n){return V(t,n)}),(function(n){return function(r){return U(V(t,r),F((function(){return r}),(function(){return tt(t,n,r)})))}}))}))},Tt=function(){return It((function(t){return Pt((function(n){return V(t,n)}),(function(n){return function(r){return U(V(t,r),F((function(){return r}),(function(){return xt(t,n,r)})))}}))}))},At=function(){return It((function(t){return Pt((function(n){return ct(t,n)}),(function(n){return function(r){return r[t]===n||v(ct(t,r))?r:ft(t,n)(r)}}))}))};var Kt=st,Ut=function(t){return ht(u(t.get,y),t.reverseGet)},Ct=function(t){return Pt(u(t.get,y),u(t.reverseGet,e))},zt=function(t){return jt((function(n){return function(r){return function(e){return n.map(r(t.get(e)),(function(n){return t.reverseGet(n)}))}}}))},Dt=pt,Rt=function(){return pt(n,e)},Yt=lt,qt=function(t){return jt((function(n){return function(r){return function(e){return n.map(r(t.get(e)),(function(n){return t.set(n)(e)}))}}}))},Bt=mt,$t=Bt,Jt=u(st,Bt),Wt=function(t){return function(n){return Nt(vt(t))(lt(n))}},Ht=function(t){return u(Yt,Nt(t))},Qt=function(t){return function(n){return function(r){var e=n.get(r),o=t(e);return e===o?r:n.set(o)(r)}}};var Vt=function(t){return function(n){return pt((function(r){return n.get(r)[t]}),(function(r){return function(e){var o,u=n.get(e);return r===u[t]?e:n.set(Object.assign({},u,((o={})[t]=r,o)))(e)}}))}},Xt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){return pt((function(r){for(var e=n.get(r),o={},u=0,i=t;u<i.length;u++){var c=i[u];o[c]=e[c]}return o}),(function(r){return function(e){for(var o=n.get(e),u=0,i=t;u<i.length;u++){var c=i[u];if(r[c]!==o[c])return n.set(Object.assign({},o,r))(e)}return e}}))}},Zt=function(t){return function(n){return pt((function(r){return n.get(r)[t]}),(function(r){return function(e){var o=n.get(e);if(r===o[t])return e;var u=o.slice();return u[t]=r,n.set(u)(e)}}))}},tn=function(t){return function(n){return U(n,mt(function(t){return{at:t}}((function(t){return pt((function(n){return ct(t,n)}),F((function(){return n=t,function(t){if(!f.call(t,n))return t;var r=Object.assign({},t);return delete r[n],r};var n}),(function(n){return ft(t,n)})))})).at(t)))}},nn=Wt(Ft()),rn=Wt(St()),en=Wt(_t());var on=function(t,n,r){return Dt(u(t.get,n),u(r,t.set))},un="monocle-ts/Lens",cn={URI:un,imap:on},fn={URI:un,compose:function(t,n){return Bt(t)(n)}},an={URI:un,compose:fn.compose,id:Rt},sn=Object.freeze({__proto__:null,lens:Dt,id:Rt,asOptional:Yt,asTraversal:qt,compose:Bt,composeLens:$t,composeIso:Jt,composePrism:Wt,composeOptional:Ht,composeTraversal:function(t){return u(qt,Gt(t))},modify:Qt,modifyF:function(t){return function(n){return function(r){return function(e){return U(r.get(e),n,(function(n){return t.map(n,(function(t){return r.set(t)(e)}))}))}}}},fromNullable:function(t){return Wt(Ot())(t)},filter:function(t){return Wt(wt(t))},prop:Vt,props:Xt,component:Zt,index:function(t){return u(Yt,function(t){return function(n){return U(n,Nt(Lt().index(t)))}}(t))},indexNonEmpty:function(t){return u(Yt,function(t){return function(n){return U(n,Nt(Tt().index(t)))}}(t))},key:function(t){return u(Yt,function(t){return function(n){return U(n,Nt(At().index(t)))}}(t))},atKey:tn,some:nn,right:rn,left:en,traverse:function(t){return u(qt,kt(t))},findFirst:function(t){return Ht(function(t){return Pt(Z(t),(function(n){return function(r){return U(X(t)(r),F((function(){return r}),(function(t){return tt(t,n,r)})))}}))}(t))},findFirstNonEmpty:function(t){return Ht(function(t){return Pt(Z(t),(function(n){return function(r){return U(X(t)(r),F((function(){return r}),(function(t){return xt(t,n,r)})))}}))}(t))},imap:function(t,n){return function(r){return on(r,t,n)}},URI:un,Invariant:cn,Semigroupoid:fn,Category:an}),pn=function(t){return jt((function(n){return function(r){return function(e){return U(t.getOption(e),F((function(){return n.of(e)}),(function(o){return n.map(r(o),(function(n){return t.set(n)(e)}))})))}}}))},ln=Nt,mn=bt,hn=Et;vt(Ot()),vt(Ft()),vt(St()),vt(_t());var vn=wt,dn=vt,yn=dt,gn=function(t){return function(n){return ht(u(n.getOption,E(t.getOption)),u(t.reverseGet,n.reverseGet))}},On=function(t){return function(n){return Nt(lt(t))(vt(n))}},wn=Gt,Fn=function(t){return function(n){return n.modifyF(Mt)(t)}};var Sn=function(t){return new Nn(t.get,t.set)},_n=function(t){return new xn(t.getOption,t.reverseGet)},Pn=function(t){return new Gn(t.getOption,t.set)},bn=function(t){return new Mn(t.modifyF)},En=function(t,n,r){var e;return r===t[n]?t:Object.assign({},t,((e={})[n]=r,e))},Nn=function(){function t(t,n){this.get=t,this.set=n,this._tag="Lens"}return t.fromPath=function(){var n=t.fromProp();return function(t){var r=n(t[0]);return t.slice(1).reduce((function(t,r){return t.compose(n(r))}),r)}},t.fromProp=function(){return function(t){return Sn(U(Rt(),Vt(t)))}},t.fromProps=function(){return function(t){return Sn(U(Rt(),Xt.apply(sn,t)))}},t.fromNullableProp=function(){return function(n,r){return new t((function(t){var e=P(t[n]);return v(e)?r:e.value}),(function(t){return function(r){return En(r,n,t)}}))}},t.prototype.modify=function(t){return Qt(t)(this)},t.prototype.asOptional=function(){return Pn(Yt(this))},t.prototype.asTraversal=function(){return bn(qt(this))},t.prototype.asSetter=function(){var t=this;return new Ln((function(n){return t.modify(n)}))},t.prototype.asGetter=function(){var t=this;return new kn((function(n){return t.get(n)}))},t.prototype.asFold=function(){var t=this;return new In((function(){return function(n){return function(r){return n(t.get(r))}}}))},t.prototype.compose=function(t){return Sn(Bt(t)(this))},t.prototype.composeLens=function(t){return this.compose(t)},t.prototype.composeGetter=function(t){return this.asGetter().compose(t)},t.prototype.composeFold=function(t){return this.asFold().compose(t)},t.prototype.composeOptional=function(t){return Pn(U(this,Yt,ln(t)))},t.prototype.composeTraversal=function(t){return bn(U(this,qt,wn(t)))},t.prototype.composeSetter=function(t){return this.asSetter().compose(t)},t.prototype.composeIso=function(t){return Sn(U(this,Bt(U(t,Kt))))},t.prototype.composePrism=function(t){return Pn(Wt(t)(this))},t}(),xn=function(){function t(t,n){this.getOption=t,this.reverseGet=n,this._tag="Prism"}return t.fromPredicate=function(t){return _n(vn(t))},t.some=function(){return jn},t.prototype.modify=function(t){var n=this;return function(r){var e=n.modifyOption(t)(r);return v(e)?r:e.value}},t.prototype.modifyOption=function(t){var n=this;return function(r){return x(n.getOption(r),(function(e){var o=t(e);return o===e?r:n.reverseGet(o)}))}},t.prototype.set=function(t){return this.modify((function(){return t}))},t.prototype.asOptional=function(){return Pn(dn(this))},t.prototype.asTraversal=function(){return bn(yn(this))},t.prototype.asSetter=function(){var t=this;return new Ln((function(n){return t.modify(n)}))},t.prototype.asFold=function(){var t=this;return new In((function(n){return function(r){return function(e){var o=t.getOption(e);return v(o)?n.empty:r(o.value)}}}))},t.prototype.compose=function(t){return _n(gn(t)(this))},t.prototype.composePrism=function(t){return this.compose(t)},t.prototype.composeOptional=function(t){return Pn(U(this,dn,ln(t)))},t.prototype.composeTraversal=function(t){return bn(U(this,yn,wn(t)))},t.prototype.composeFold=function(t){return this.asFold().compose(t)},t.prototype.composeSetter=function(t){return this.asSetter().compose(t)},t.prototype.composeIso=function(t){return _n(U(this,gn(U(t,Ut))))},t.prototype.composeLens=function(t){return Pn(On(t)(this))},t.prototype.composeGetter=function(t){return this.asFold().compose(t.asFold())},t}(),jn=new xn(n,y),Gn=function(){function t(t,n){this.getOption=t,this.set=n,this._tag="Optional"}return t.fromPath=function(){var n=t.fromNullableProp();return function(t){var r=n(t[0]);return t.slice(1).reduce((function(t,r){return t.compose(n(r))}),r)}},t.fromNullableProp=function(){return function(n){return new t((function(t){return P(t[n])}),(function(t){return function(r){return null==r[n]?r:En(r,n,t)}}))}},t.fromOptionProp=function(){var t=Nn.fromProp();return function(n){return t(n).composePrism(jn)}},t.prototype.modify=function(t){return hn(t)(this)},t.prototype.modifyOption=function(t){return mn(t)(this)},t.prototype.asTraversal=function(){return bn(pn(this))},t.prototype.asFold=function(){var t=this;return new In((function(n){return function(r){return function(e){var o=t.getOption(e);return v(o)?n.empty:r(o.value)}}}))},t.prototype.asSetter=function(){var t=this;return new Ln((function(n){return t.modify(n)}))},t.prototype.compose=function(t){return Pn(ln(t)(this))},t.prototype.composeOptional=function(t){return this.compose(t)},t.prototype.composeTraversal=function(t){return bn(U(this,pn,wn(t)))},t.prototype.composeFold=function(t){return this.asFold().compose(t)},t.prototype.composeSetter=function(t){return this.asSetter().compose(t)},t.prototype.composeLens=function(t){return Pn(U(this,ln(U(t,Yt))))},t.prototype.composePrism=function(t){return Pn(U(this,ln(U(t,dn))))},t.prototype.composeIso=function(t){return Pn(U(this,ln(U(t,Ct))))},t.prototype.composeGetter=function(t){return this.asFold().compose(t.asFold())},t}(),Mn=function(){function t(t){this.modifyF=t,this._tag="Traversal"}return t.prototype.modify=function(t){return Fn(t)(this)},t.prototype.set=function(t){return function(t){return Fn((function(){return t}))}(t)(this)},t.prototype.filter=function(t){return bn(function(t){return wn(dt(wt(t)))}(t)(this))},t.prototype.asFold=function(){var t=this;return new In((function(n){return function(r){return t.modifyF(et(n))((function(t){return rt(r(t))}))}}))},t.prototype.asSetter=function(){var t=this;return new Ln((function(n){return t.modify(n)}))},t.prototype.compose=function(t){return bn(wn(t)(this))},t.prototype.composeTraversal=function(t){return this.compose(t)},t.prototype.composeFold=function(t){return this.asFold().compose(t)},t.prototype.composeSetter=function(t){return this.asSetter().compose(t)},t.prototype.composeOptional=function(t){return this.compose(t.asTraversal())},t.prototype.composeLens=function(t){return bn(U(this,wn(U(t,qt))))},t.prototype.composePrism=function(t){return bn(U(this,wn(U(t,yn))))},t.prototype.composeIso=function(t){return bn(U(this,wn(U(t,zt))))},t.prototype.composeGetter=function(t){return this.asFold().compose(t.asFold())},t}(),kn=function(){function t(t){this.get=t,this._tag="Getter"}return t.prototype.asFold=function(){var t=this;return new In((function(){return function(n){return function(r){return n(t.get(r))}}}))},t.prototype.compose=function(n){var r=this;return new t((function(t){return n.get(r.get(t))}))},t.prototype.composeGetter=function(t){return this.compose(t)},t.prototype.composeFold=function(t){return this.asFold().compose(t)},t.prototype.composeLens=function(t){return this.compose(t.asGetter())},t.prototype.composeIso=function(t){return this.compose(t.asGetter())},t.prototype.composeTraversal=function(t){return this.asFold().compose(t.asFold())},t.prototype.composeOptional=function(t){return this.asFold().compose(t.asFold())},t.prototype.composePrism=function(t){return this.asFold().compose(t.asFold())},t}(),In=function(){function t(t){this.foldMap=t,this._tag="Fold",this.getAll=t({concat:function(t,n){return t.concat(n)},empty:[]})(nt),this.exist=t(T),this.all=t(L),this.foldMapFirst=t({concat:function(t,n){return v(t)?n:t},empty:d})}return t.prototype.compose=function(n){var r=this;return new t((function(t){return function(e){return r.foldMap(t)(n.foldMap(t)(e))}}))},t.prototype.composeFold=function(t){return this.compose(t)},t.prototype.composeGetter=function(t){return this.compose(t.asFold())},t.prototype.composeTraversal=function(t){return this.compose(t.asFold())},t.prototype.composeOptional=function(t){return this.compose(t.asFold())},t.prototype.composeLens=function(t){return this.compose(t.asFold())},t.prototype.composePrism=function(t){return this.compose(t.asFold())},t.prototype.composeIso=function(t){return this.compose(t.asFold())},t.prototype.find=function(t){return this.foldMapFirst(g(t))},t.prototype.headOption=function(t){return this.find((function(){return!0}))(t)},t}(),Ln=function(){function t(t){this.modify=t,this._tag="Setter"}return t.prototype.set=function(t){return this.modify(e(t))},t.prototype.compose=function(n){var r=this;return new t((function(t){return r.modify(n.modify(t))}))},t.prototype.composeSetter=function(t){return this.compose(t)},t.prototype.composeTraversal=function(t){return this.compose(t.asSetter())},t.prototype.composeOptional=function(t){return this.compose(t.asSetter())},t.prototype.composeLens=function(t){return this.compose(t.asSetter())},t.prototype.composePrism=function(t){return this.compose(t.asSetter())},t.prototype.composeIso=function(t){return this.compose(t.asSetter())},t}(),Tn={},An={};Object.defineProperty(An,"__esModule",{value:!0}),An.AnonymousSelect=An.NamedSelect=An.Not=An.Guard=An.PatternKind=void 0,An.PatternKind=Symbol("@ts-pattern/pattern-kind"),An.Guard=Symbol("@ts-pattern/guard"),An.Not=Symbol("@ts-pattern/not"),An.NamedSelect=Symbol("@ts-pattern/named-select"),An.AnonymousSelect=Symbol("@ts-pattern/anonymous-select");var Kn={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOf=t.select=t.ANONYMOUS_SELECT_KEY=t.not=t.when=void 0;const n=An;t.when=t=>({[n.PatternKind]:n.Guard,[n.Guard]:t});t.not=t=>({[n.PatternKind]:n.Not,[n.Not]:t}),t.ANONYMOUS_SELECT_KEY="@ts-pattern/__anonymous-select-key",t.select=function(t){return void 0===t?{[n.PatternKind]:n.AnonymousSelect}:{[n.PatternKind]:n.NamedSelect,[n.NamedSelect]:t}};t.instanceOf=n=>t.when(function(t){return n=>n instanceof t}(n))}(Kn);var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.__=void 0;const Cn=Kn;const zn=Cn.when((function(t){return!0})),Dn=Cn.when((function(t){return"string"==typeof t})),Rn=Cn.when((function(t){return"number"==typeof t&&!Number.isNaN(t)})),Yn=Cn.when((function(t){return"boolean"==typeof t})),qn=Cn.when((function(t){return null==t}));Un.__=Object.assign(zn,{string:Dn,number:Rn,boolean:Yn,nullish:qn}),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isMatching=t.match=t.instanceOf=t.select=t.not=t.when=t.__=void 0;const n=An,r=Kn;Object.defineProperty(t,"when",{enumerable:!0,get:function(){return r.when}}),Object.defineProperty(t,"not",{enumerable:!0,get:function(){return r.not}}),Object.defineProperty(t,"select",{enumerable:!0,get:function(){return r.select}}),Object.defineProperty(t,"instanceOf",{enumerable:!0,get:function(){return r.instanceOf}});const e=Un;Object.defineProperty(t,"__",{enumerable:!0,get:function(){return e.__}});t.match=t=>o(t,[]);const o=(t,n)=>{const e=()=>{const r=n.find((({test:n})=>n(t)));if(!r){let n;try{n=JSON.stringify(t)}catch(r){n=t}throw new Error(`Pattern matching error: no pattern matches value ${n}`)}return r.handler(r.select(t),t)};return{with(...e){const u=e[e.length-1],c=[],f=[];for(let t=0;t<e.length-1;t++){const n=e[t];"function"==typeof n?f.push(n):c.push(n)}let a={};return o(t,n.concat([{test:t=>Boolean(c.some((n=>i(n,t,((t,n)=>{a[t]=n}))))&&f.every((n=>n(t)))),handler:u,select:t=>Object.keys(a).length?void 0!==a[r.ANONYMOUS_SELECT_KEY]?a[r.ANONYMOUS_SELECT_KEY]:a:t}]))},when:(r,e)=>o(t,n.concat([{test:r,handler:e,select:t=>t}])),otherwise:r=>o(t,n.concat([{test:()=>!0,handler:r,select:t=>t}])).run(),exhaustive:()=>e(),run:e}},u=t=>Boolean(t&&"object"==typeof t),i=(t,o,c)=>{if(u(t)){if((f=t)&&f[n.PatternKind]===n.Guard)return Boolean(t[n.Guard](o));if((t=>t&&t[n.PatternKind]===n.NamedSelect)(t))return c(t[n.NamedSelect],o),!0;if((t=>t&&t[n.PatternKind]===n.AnonymousSelect)(t))return c(r.ANONYMOUS_SELECT_KEY,o),!0;if((t=>t&&t[n.PatternKind]===n.Not)(t))return!i(t[n.Not],o,c);if(!u(o))return!1;if(Array.isArray(t)){if(!Array.isArray(o))return!1;if(1===t.length){const n={},r=(t,r)=>{n[t]=(n[t]||[]).concat([r])},e=o.every((n=>i(t[0],n,r)));return e&&Object.keys(n).forEach((t=>c(t,n[t]))),e}return t.length===o.length&&t.every(((t,n)=>i(t,o[n],c)))}if(t instanceof Map)return o instanceof Map&&[...t.keys()].every((n=>i(t.get(n),o.get(n),c)));if(t instanceof Set){if(!(o instanceof Set))return!1;if(0===t.size)return 0===o.size;if(1===t.size){const[n]=[...t.values()];return Object.values(e.__).includes(n)?i([n],[...o.values()],c):o.has(n)}return[...t.values()].every((t=>o.has(t)))}return Object.keys(t).every((n=>n in o&&i(t[n],o[n],c)))}var f;return o===t};t.isMatching=function(...t){if(1===t.length){const[n]=t;return t=>i(n,t,(()=>{}))}if(2===t.length){const[n,r]=t;return i(n,r,(()=>{}))}throw new Error(`isMatching wasn't given enough arguments: expected 1 or 2, received ${t.length}.`)}}(Tn);var Bn,$n=function(t){return"boolean"==typeof t&&!t};!function(t){t.FormatterPath="hansjhoffman.nix.config.nixFormatPath",t.FormatOnSave="hansjhoffman.nix.config.formatOnSave",t.FormatDocument="hansjhoffman.nix.commands.formatDocument"}(Bn||(Bn={}));var Jn=function(t,n){var r,e,o=t.document.path;return r=function(){return new Promise((function(t,r){var e=new Process("/usr/bin/env",{args:[""+n,""+o]});e.onDidExit((function(n){return 0===n?t():r()})),e.start()}))},e=function(){return{_tag:"invokeFormatterError",reason:nova.localize("Failed to format the document")+"."}},function(){return r().then(p,(function(t){return s(e(t))}))}},Wn={workspace:{formatOnSave:i(P(nova.workspace.config.get(Bn.FormatOnSave)),E((function(t){return w(J.decode(t))})),S((function(){return!1}))),formatterPath:i(P(nova.workspace.config.get(Bn.FormatterPath)),E((function(t){return w($.decode(t))})),E(g((function(t){return $n(K(t))}))))},global:{formatOnSave:i(P(nova.config.get(Bn.FormatOnSave)),E((function(t){return w(J.decode(t))})),S((function(){return!1}))),formatterPath:i(P(nova.config.get(Bn.FormatterPath)),E((function(t){return w($.decode(t))})),E(g((function(t){return $n(K(t))}))))}},Hn=Nn.fromPath()(["workspace"]),Qn=Nn.fromPath()(["global"]),Vn=new CompositeDisposable,Xn=new Map,Zn=function(t){var n=Hn.get(t),r=Qn.get(t);return n.formatOnSave||r.formatOnSave},tr=function(t){i(P(t.document.syntax),E(g((function(t){return A.equals(t,"nix")}))),F(o,(function(n){Xn=G(A)(t.document.uri,t.onWillSave(rr))(Xn)})))},nr=function(){var t;i(Xn,(t=function(t){return t.dispose()},function(n){return I(n,t)})),Xn=new Map},rr=function(t){i(function(t){var n=Hn.get(t),r=Qn.get(t);return i(n.formatterPath,N((function(){return r.formatterPath})))}(Wn),F((function(){return console.log(nova.localize("Skipping")+"... "+nova.localize("No formatter set")+".")}),(function(n){Jn(t,n)().then(l((function(t){return Tn.match(t).with({_tag:"invokeFormatterError"},(function(t){var n=t.reason;return console.error(n)})).exhaustive()}),(function(){return console.log(nova.localize("Formatted")+" "+t.document.path)})))})))};exports.activate=function(){console.log(nova.localize("Activating")+"..."),function(t){if(nova.inDevMode()){var n=new NotificationRequest("nix-nova-notification");n.title=nova.extension.name,n.body=t,nova.notifications.add(n)}}(nova.localize("Starting extension")+"..."),Vn.add(nova.workspace.onDidAddTextEditor((function(t){Zn(Wn)&&tr(t)}))),Vn.add(nova.commands.register(Bn.FormatDocument,rr)),Vn.add(nova.workspace.config.onDidChange(Bn.FormatterPath,(function(n,r){Wn=Hn.modify((function(r){return t(t({},r),{formatterPath:w($.decode(n))})}))(Wn),Zn(Wn)&&(nr(),nova.workspace.textEditors.forEach(tr))}))),Vn.add(nova.workspace.config.onDidChange(Bn.FormatOnSave,(function(n,r){Wn=Hn.modify((function(r){return t(t({},r),{formatOnSave:i(J.decode(n),m((function(){return!1})))})}))(Wn);var e=Zn(Wn);nr(),e&&nova.workspace.textEditors.forEach(tr)}))),Vn.add(nova.config.onDidChange(Bn.FormatterPath,(function(n,r){Wn=Qn.modify((function(r){return t(t({},r),{formatterPath:w($.decode(n))})}))(Wn),Zn(Wn)&&(nr(),nova.workspace.textEditors.forEach(tr))}))),Vn.add(nova.config.onDidChange(Bn.FormatOnSave,(function(n,r){Wn=Qn.modify((function(r){return t(t({},r),{formatOnSave:i(J.decode(n),m((function(){return!1})))})}))(Wn);var e=Zn(Wn);nr(),e&&nova.workspace.textEditors.forEach(tr)}))),console.log(nova.localize("Activated")+" 🎉")},exports.deactivate=function(){console.log(nova.localize("Deactivating")+"..."),nr(),Vn.dispose()};
//# sourceMappingURL=main.cjs.min.js.map
