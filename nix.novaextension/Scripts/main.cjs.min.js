"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(){return(n=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function t(n){return n}var r=t;function e(n){return function(){return n}}var o=e(void 0);function u(n,t,r,e,o,u,i,c,f){switch(arguments.length){case 1:return n;case 2:return function(){return t(n.apply(this,arguments))};case 3:return function(){return r(t(n.apply(this,arguments)))};case 4:return function(){return e(r(t(n.apply(this,arguments))))};case 5:return function(){return o(e(r(t(n.apply(this,arguments)))))};case 6:return function(){return u(o(e(r(t(n.apply(this,arguments))))))};case 7:return function(){return i(u(o(e(r(t(n.apply(this,arguments)))))))};case 8:return function(){return c(i(u(o(e(r(t(n.apply(this,arguments))))))))};case 9:return function(){return f(c(i(u(o(e(r(t(n.apply(this,arguments)))))))))}}}function i(n,t,r,e,o,u,i,c,f,a,s,p,l,m,v,h,d,y,g,O){switch(arguments.length){case 1:return n;case 2:return t(n);case 3:return r(t(n));case 4:return e(r(t(n)));case 5:return o(e(r(t(n))));case 6:return u(o(e(r(t(n)))));case 7:return i(u(o(e(r(t(n))))));case 8:return c(i(u(o(e(r(t(n)))))));case 9:return f(c(i(u(o(e(r(t(n))))))));case 10:return a(f(c(i(u(o(e(r(t(n)))))))));case 11:return s(a(f(c(i(u(o(e(r(t(n))))))))));case 12:return p(s(a(f(c(i(u(o(e(r(t(n)))))))))));case 13:return l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))));case 14:return m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))));case 15:return v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))));case 16:return h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))));case 17:return d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))))));case 18:return y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))))));case 19:return g(y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))))))));case 20:return O(g(y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))))))))}}var c=function(n,t){return t},f=function(n,t){for(var r=0,e=t.length,o=n.length;r<e;r++,o++)n[o]=t[r];return n},a=function(n){return"Some"===n._tag},s={_tag:"None"},p=function(n){return{_tag:"Some",value:n}},l=function(n){return"Left"===n._tag},m=function(n){return{_tag:"Left",left:n}},v=function(n){return{_tag:"Right",right:n}},h=Object.prototype.hasOwnProperty,d=function(n,t){return{left:n,right:t}};function y(n,t){return function(r){var e=n.traverse(r);return function(n,o){return r.map(e(n,o),t.separate)}}}function g(n,t){return function(r){var e=n.traverse(r);return function(n,o){return r.map(e(n,o),t.compact)}}}var O=m,w=v,S=function(n){return function(t){return F(t)?t:n(t.right)}},F=l,_=function(n){return"Right"===n._tag},P=function(n,t){return function(r){return F(r)?n(r.left):t(r.right)}},b=function(n){return function(t){return F(t)?n(t.left):t.right}},E=s,N=p;function x(n){return function(t){return n(t)?N(t):E}}var j=function(n){return"Left"===n._tag?E:N(n.right)},G=function(n,t){return i(n,M(t))},M=function(n){return function(t){return L(t)?E:N(n(t.value))}},k=function(n){return function(t){return L(t)?E:n(t.value)}},I=function(n){return function(t){return L(t)?n():t}},T=j,L=function(n){return"None"===n._tag},A=function(n,t){return function(r){return L(r)?n():t(r.value)}},R=function(n){return function(t){return L(t)?n():t.value}},U=R,K=function(n){return null==n?E:N(n)},C=G,z=function(){return n={concat:t},{concat:function(t,r){return L(t)?r:L(r)?t:N(n.concat(t.value,r.value))},empty:E};var n},D=function(n){var t=Y(n);return function(n,r){var e=t(n);return function(t){var o,u=e(t);return"None"===u._tag?((o=new Map(t)).set(n,r),o):u.value[1]!==r?((o=new Map(t)).set(u.value[0],r),o):t}}};function Y(n){return function(t,r){if(void 0===r){var e=Y(n);return function(n){return e(t,n)}}for(var o,u=r.entries();!(o=u.next()).done;){var i=o.value,c=i[0],f=i[1];if(n.equals(c,t))return p([c,f])}return s}}var q=function(n,t){return function(n,t){for(var r,e=new Map,o=n.entries();!(r=o.next()).done;){var u=r.value,i=u[0],c=u[1];e.set(i,t(i,c))}return e}(n,(function(n,r){return t(r)}))};function B(n){return u(w,n.of)}B({URI:"Task",of:function(n){return function(){return Promise.resolve(n)}}})([]);var $=function(n){return n.length>0},J=function(n,t,r){if(r[n]===t)return r;var e=function(n){return f([n[0]],n.slice(1))}(r);return e[n]=t,e},W={equals:function(n,t){return n===t}},H={equals:W.equals,compare:function(n,t){return n<t?-1:n>t?1:0}},Q=function(n){return 0===n.length},V=i,X=function(n,t){return{_tag:"Concat",left:n,right:t}};function Z(){return{concat:X}}var nn={is:function(n){return"string"==typeof n}},tn={is:function(n){return"boolean"==typeof n}};var rn=Z(),en={URI:"Either",_E:void 0,map:function(n,t){return V(n,function(n){return function(t){return F(t)?t:w(n(t.right))}}(t))},ap:function(n,t){return F(n)?F(t)?O(rn.concat(n.left,t.left)):n:F(t)?t:w(n.right(t.right))},of:w,chain:function(n,t){return V(n,S(t))},throwError:O,bimap:function(n,t,r){return V(n,function(n,t){return function(r){return F(r)?O(n(r.left)):w(t(r.right))}}(t,r))},mapLeft:function(n,t){return V(n,function(n){return function(t){return F(t)?O(n(t.left)):t}}(t))},alt:function(n,t){if(_(n))return n;var r=t();return F(r)?O(rn.concat(n.left,r.left)):r}},on=function(n,t){return function(n,t){return function(n){return function(t,r){return{decode:function(e){return t(e)?n.of(e):n.throwError(r(e))}}}}(en)(n,(function(n){return{_tag:"Of",value:function(n,t){return{_tag:"Leaf",actual:n,error:t}}(n,t)}}))}(n.is,t)},un=on(nn,"string"),cn=on(tn,"boolean"),fn=$,an=function(n,t){return n<0||n>=t.length};function sn(n,t){return void 0===t?function(t){return sn(n,t)}:an(n,t)?s:p(t[n])}var pn=function(n){return function(t){for(var r=0;r<t.length;r++)if(n(t[r]))return p(r);return s}};function ln(n){return function(t){for(var r=0;r<t.length;r++)if(n(t[r]))return p(t[r]);return s}}var mn=function(n,t,r){return fn(r)?J(n,t,r):r},vn=function(n){return[n]},hn=r;function dn(n){var t,r=(t=n,{URI:On,_E:void 0,map:yn,ap:function(n,r){return hn(t.concat(n,r))}});return{URI:On,_E:void 0,map:r.map,ap:r.ap,of:function(){return hn(n.empty)}}}var yn=function(n,t){return i(n,gn(t))},gn=function(){return r},On="Const",wn={concat:function(n,t){return n&&t},empty:!0},Sn={concat:function(n,t){return n||t},empty:!1},Fn=function(n){return function(t){return Object.keys(t).sort(n.compare)}};function _n(n,t){return void 0===t?function(t){return _n(n,t)}:h.call(t,n)?p(t[n]):s}var Pn={};function bn(n){return function(t){var r={};for(var e in t)h.call(t,e)&&(r[e]=n(e,t[e]));return r}}function En(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(2===n.length)return En(H).apply(void 0,n);var r=Fn(n[0]);return function(n,t){return function(e){for(var o=n,u=r(e),i=u.length,c=0;c<i;c++){var f=u[c];o=t(f,o,e[f])}return o}}}function Nn(n){if("compare"in n){var t=Fn(n);return function(n){return function(r){return function(e){for(var o=n.empty,u=t(e),i=u.length,c=0;c<i;c++){var f=u[c];o=n.concat(o,r(f,e[f]))}return o}}}}return Nn(H)(n)}function xn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(2===n.length)return xn(H).apply(void 0,n);var r=Fn(n[0]);return function(n,t){return function(e){for(var o=n,u=r(e),i=u.length-1;i>=0;i--){var c=u[i];o=t(c,e[c],o)}return o}}}function jn(n){return Un(H)(n)}var Gn=function(n,t){return i(n,function(n){return bn((function(t,r){return n(r)}))}(t))},Mn=function(n){var t=Cn(n);return function(n,r,e){return i(n,t(r,e))}},kn=function(n){return function(t){var r=zn(n)(t);return function(n,t){return i(n,r(t))}}},In=function(n){var t=Dn(n);return function(n,r,e){return i(n,t(r,e))}},Tn=function(n){var t=En(n);return function(n,r,e){return i(n,t(r,e))}},Ln=function(n){var t=Nn(n);return function(n){var r=t(n);return function(n,t){return i(n,r(t))}}},An=function(n){var t=xn(n);return function(n,r,e){return i(n,t(r,e))}},Rn=function(n){var t=Kn(n);return function(n){var r=t(n);return function(n,t){return r(n,u(c,t))}}},Un=function(n){var r=Rn(n);return function(n){var e=r(n);return function(n){return e(n,t)}}},Kn=function(n){return function(t){var r=Fn(n);return function(n,e){var o=r(n);if(0===o.length)return t.of(Pn);for(var u=t.of({}),i=function(r){u=t.ap(t.map(u,(function(n){return function(t){return n[r]=t,n}})),e(r,n[r]))},c=0,f=o;c<f.length;c++){i(f[c])}return u}}};function Cn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(1===n.length){var r=En(n[0]);return function(n,t){return r(n,(function(n,r,e){return t(r,e)}))}}return Cn(H).apply(void 0,n)}function zn(n){if("compare"in n){var t=Nn(n);return function(n){var r=t(n);return function(n){return r((function(t,r){return n(r)}))}}}return zn(H)(n)}function Dn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(1===n.length){var r=xn(n[0]);return function(n,t){return r(n,(function(n,r,e){return t(r,e)}))}}return Dn(H).apply(void 0,n)}var Yn=function(n){var t={};for(var r in n)if(h.call(n,r)){var e=n[r];a(e)&&(t[r]=e.value)}return t},qn=function(n){var t={},r={};for(var e in n)if(h.call(n,e)){var o=n[e];l(o)?t[e]=o.left:r[e]=o.right}return d(t,r)},Bn="ReadonlyRecord",$n={URI:Bn,compact:Yn,separate:qn};Mn(H),kn(H),In(H),Mn(H),kn(H),In(H),Tn(H),Ln(H),An(H);var Jn={URI:Bn,map:Gn,reduce:Mn(H),foldMap:kn(H),reduceRight:In(H),traverse:Rn(H),sequence:jn};Mn(H),kn(H),In(H),Tn(H),Ln(H),An(H),Rn(H),Kn(H);g(Jn,$n),y(Jn,$n);Mn(H),kn(H),In(H),Rn(H);var Wn=function(n,t){return function(r){if(h.call(r,n)&&r[n]===t)return r;var e=Object.assign({},r);return e[n]=t,e}};Mn(H),kn(H),In(H),Rn(H),Tn(H),Ln(H),An(H),Kn(H);var Hn=function(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;var e=Array(n),o=0;for(t=0;t<r;t++)for(var u=arguments[t],i=0,c=u.length;i<c;i++,o++)e[o]=u[i];return e},Qn=function(n){return Vn(n.get,u(n.reverseGet,e))},Vn=function(n,t){return{get:n,set:t}},Xn=function(n){return st(u(n.get,N),n.set)},Zn=function(n){return function(t){return Vn((function(r){return n.get(t.get(r))}),(function(r){return function(e){return t.set(n.set(r)(t.get(e)))(e)}}))}},nt=function(n,t){return{getOption:n,reverseGet:t}},tt=function(n){return st(n.getOption,(function(t){return ot(t)(n)}))},rt=function(n){return ht((function(t){return function(r){return function(e){return V(n.getOption(e),A((function(){return t.of(e)}),(function(o){return t.map(r(o),(function(t){return ot(t)(n)(e)}))})))}}}))},et=function(n){return function(t){var r=function(n){return function(t){return function(r){return V(t.getOption(r),M((function(e){var o=n(e);return o===e?r:t.reverseGet(o)})))}}}(n)(t);return function(n){return V(r(n),U((function(){return n})))}}},ot=function(n){return et((function(){return n}))},ut=function(){return nt(K,t)},it=function(n){return nt(x(n),t)},ct=function(){return nt(t,N)},ft=function(){return nt(T,w)},at=function(){return nt((function(n){return F(n)?N(n.left):E}),O)},st=function(n,t){return{getOption:n,set:t}},pt=function(n){return function(t){return function(r){return V(t.getOption(r),M((function(e){var o=n(e);return o===e?r:t.set(o)(r)})))}}},lt=function(n){return function(t){var r=pt(n)(t);return function(n){return V(r(n),U((function(){return n})))}}},mt=function(n){return function(t){return st(u(t.getOption,k(n.getOption)),(function(r){return lt(n.set(r))(t)}))}},vt=function(n,t,r){if(r[n]===t)return r;var e=Hn([r[0]],r.slice(1));return e[n]=t,e},ht=function(n){return{modifyF:n}};function dt(n){return function(t){return ht((function(r){return function(e){return t.modifyF(r)(n.modifyF(r)(e))}}))}}var yt={URI:"Identity",map:function(n,t){return t(n)},of:t,ap:function(n,t){return n(t)}};function gt(n){return dt(function(n){return function(){return ht((function(t){var r=function(n){return"Identity"===n.URI}(t)?n.map:n.traverse(t);return function(n){return function(t){return r(t,n)}}}))}}(n)())}var Ot=function(n){return{index:n}},wt=function(){return Ot((function(n){return st((function(t){return sn(n,t)}),(function(t){return function(r){return V(sn(n,r),A((function(){return r}),(function(){return mn(n,t,r)})))}}))}))},St=function(){return Ot((function(n){return st((function(t){return sn(n,t)}),(function(t){return function(r){return V(sn(n,r),A((function(){return r}),(function(){return vt(n,t,r)})))}}))}))},Ft=function(){return Ot((function(n){return st((function(t){return _n(n,t)}),(function(t){return function(r){return r[n]===t||L(_n(n,r))?r:Wn(n,t)(r)}}))}))};var _t=Qn,Pt=function(n){return nt(u(n.get,N),n.reverseGet)},bt=function(n){return st(u(n.get,N),u(n.reverseGet,e))},Et=function(n){return ht((function(t){return function(r){return function(e){return t.map(r(n.get(e)),(function(t){return n.reverseGet(t)}))}}}))},Nt=Vn,xt=function(){return Vn(t,e)},jt=Xn,Gt=function(n){return ht((function(t){return function(r){return function(e){return t.map(r(n.get(e)),(function(t){return n.set(t)(e)}))}}}))},Mt=Zn,kt=Mt,It=u(Qn,Mt),Tt=function(n){return function(t){return mt(tt(n))(Xn(t))}},Lt=function(n){return u(jt,mt(n))},At=function(n){return function(t){return function(r){var e=t.get(r),o=n(e);return e===o?r:t.set(o)(r)}}};var Rt=function(n){return function(t){return Vn((function(r){return t.get(r)[n]}),(function(r){return function(e){var o,u=t.get(e);return r===u[n]?e:t.set(Object.assign({},u,((o={})[n]=r,o)))(e)}}))}},Ut=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){return Vn((function(r){for(var e=t.get(r),o={},u=0,i=n;u<i.length;u++){var c=i[u];o[c]=e[c]}return o}),(function(r){return function(e){for(var o=t.get(e),u=0,i=n;u<i.length;u++){var c=i[u];if(r[c]!==o[c])return t.set(Object.assign({},o,r))(e)}return e}}))}},Kt=function(n){return function(t){return Vn((function(r){return t.get(r)[n]}),(function(r){return function(e){var o=t.get(e);if(r===o[n])return e;var u=o.slice();return u[n]=r,t.set(u)(e)}}))}},Ct=function(n){return function(t){return V(t,Zn(function(n){return{at:n}}((function(n){return Vn((function(t){return _n(n,t)}),A((function(){return t=n,function(n){if(!h.call(n,t))return n;var r=Object.assign({},n);return delete r[t],r};var t}),(function(t){return Wn(n,t)})))})).at(n)))}},zt=Tt(ct()),Dt=Tt(ft()),Yt=Tt(at());var qt=function(n,t,r){return Nt(u(n.get,t),u(r,n.set))},Bt="monocle-ts/Lens",$t={URI:Bt,imap:qt},Jt={URI:Bt,compose:function(n,t){return Mt(n)(t)}},Wt={URI:Bt,compose:Jt.compose,id:xt},Ht=Object.freeze({__proto__:null,lens:Nt,id:xt,asOptional:jt,asTraversal:Gt,compose:Mt,composeLens:kt,composeIso:It,composePrism:Tt,composeOptional:Lt,composeTraversal:function(n){return u(Gt,dt(n))},modify:At,modifyF:function(n){return function(t){return function(r){return function(e){return V(r.get(e),t,(function(t){return n.map(t,(function(n){return r.set(n)(e)}))}))}}}},fromNullable:function(n){return Tt(ut())(n)},filter:function(n){return Tt(it(n))},prop:Rt,props:Ut,component:Kt,index:function(n){return u(jt,function(n){return function(t){return V(t,mt(wt().index(n)))}}(n))},indexNonEmpty:function(n){return u(jt,function(n){return function(t){return V(t,mt(St().index(n)))}}(n))},key:function(n){return u(jt,function(n){return function(t){return V(t,mt(Ft().index(n)))}}(n))},atKey:Ct,some:zt,right:Dt,left:Yt,traverse:function(n){return u(Gt,gt(n))},findFirst:function(n){return Lt(function(n){return st(ln(n),(function(t){return function(r){return V(pn(n)(r),A((function(){return r}),(function(n){return mn(n,t,r)})))}}))}(n))},findFirstNonEmpty:function(n){return Lt(function(n){return st(ln(n),(function(t){return function(r){return V(pn(n)(r),A((function(){return r}),(function(n){return vt(n,t,r)})))}}))}(n))},imap:function(n,t){return function(r){return qt(r,n,t)}},URI:Bt,Invariant:$t,Semigroupoid:Jt,Category:Wt}),Qt=function(n){return ht((function(t){return function(r){return function(e){return V(n.getOption(e),A((function(){return t.of(e)}),(function(o){return t.map(r(o),(function(t){return n.set(t)(e)}))})))}}}))},Vt=mt,Xt=pt,Zt=lt;tt(ut()),tt(ct()),tt(ft()),tt(at());var nr=it,tr=tt,rr=rt,er=function(n){return function(t){return nt(u(t.getOption,k(n.getOption)),u(n.reverseGet,t.reverseGet))}},or=function(n){return function(t){return mt(Xn(n))(tt(t))}},ur=dt,ir=function(n){return function(t){return t.modifyF(yt)(n)}};var cr=function(n){return new lr(n.get,n.set)},fr=function(n){return new mr(n.getOption,n.reverseGet)},ar=function(n){return new hr(n.getOption,n.set)},sr=function(n){return new dr(n.modifyF)},pr=function(n,t,r){var e;return r===n[t]?n:Object.assign({},n,((e={})[t]=r,e))},lr=function(){function n(n,t){this.get=n,this.set=t,this._tag="Lens"}return n.fromPath=function(){var t=n.fromProp();return function(n){var r=t(n[0]);return n.slice(1).reduce((function(n,r){return n.compose(t(r))}),r)}},n.fromProp=function(){return function(n){return cr(V(xt(),Rt(n)))}},n.fromProps=function(){return function(n){return cr(V(xt(),Ut.apply(Ht,n)))}},n.fromNullableProp=function(){return function(t,r){return new n((function(n){var e=K(n[t]);return L(e)?r:e.value}),(function(n){return function(r){return pr(r,t,n)}}))}},n.prototype.modify=function(n){return At(n)(this)},n.prototype.asOptional=function(){return ar(jt(this))},n.prototype.asTraversal=function(){return sr(Gt(this))},n.prototype.asSetter=function(){var n=this;return new Or((function(t){return n.modify(t)}))},n.prototype.asGetter=function(){var n=this;return new yr((function(t){return n.get(t)}))},n.prototype.asFold=function(){var n=this;return new gr((function(){return function(t){return function(r){return t(n.get(r))}}}))},n.prototype.compose=function(n){return cr(Mt(n)(this))},n.prototype.composeLens=function(n){return this.compose(n)},n.prototype.composeGetter=function(n){return this.asGetter().compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeOptional=function(n){return ar(V(this,jt,Vt(n)))},n.prototype.composeTraversal=function(n){return sr(V(this,Gt,ur(n)))},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeIso=function(n){return cr(V(this,Mt(V(n,_t))))},n.prototype.composePrism=function(n){return ar(Tt(n)(this))},n}(),mr=function(){function n(n,t){this.getOption=n,this.reverseGet=t,this._tag="Prism"}return n.fromPredicate=function(n){return fr(nr(n))},n.some=function(){return vr},n.prototype.modify=function(n){var t=this;return function(r){var e=t.modifyOption(n)(r);return L(e)?r:e.value}},n.prototype.modifyOption=function(n){var t=this;return function(r){return C(t.getOption(r),(function(e){var o=n(e);return o===e?r:t.reverseGet(o)}))}},n.prototype.set=function(n){return this.modify((function(){return n}))},n.prototype.asOptional=function(){return ar(tr(this))},n.prototype.asTraversal=function(){return sr(rr(this))},n.prototype.asSetter=function(){var n=this;return new Or((function(t){return n.modify(t)}))},n.prototype.asFold=function(){var n=this;return new gr((function(t){return function(r){return function(e){var o=n.getOption(e);return L(o)?t.empty:r(o.value)}}}))},n.prototype.compose=function(n){return fr(er(n)(this))},n.prototype.composePrism=function(n){return this.compose(n)},n.prototype.composeOptional=function(n){return ar(V(this,tr,Vt(n)))},n.prototype.composeTraversal=function(n){return sr(V(this,rr,ur(n)))},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeIso=function(n){return fr(V(this,er(V(n,Pt))))},n.prototype.composeLens=function(n){return ar(or(n)(this))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),vr=new mr(t,N),hr=function(){function n(n,t){this.getOption=n,this.set=t,this._tag="Optional"}return n.fromPath=function(){var t=n.fromNullableProp();return function(n){var r=t(n[0]);return n.slice(1).reduce((function(n,r){return n.compose(t(r))}),r)}},n.fromNullableProp=function(){return function(t){return new n((function(n){return K(n[t])}),(function(n){return function(r){return null==r[t]?r:pr(r,t,n)}}))}},n.fromOptionProp=function(){var n=lr.fromProp();return function(t){return n(t).composePrism(vr)}},n.prototype.modify=function(n){return Zt(n)(this)},n.prototype.modifyOption=function(n){return Xt(n)(this)},n.prototype.asTraversal=function(){return sr(Qt(this))},n.prototype.asFold=function(){var n=this;return new gr((function(t){return function(r){return function(e){var o=n.getOption(e);return L(o)?t.empty:r(o.value)}}}))},n.prototype.asSetter=function(){var n=this;return new Or((function(t){return n.modify(t)}))},n.prototype.compose=function(n){return ar(Vt(n)(this))},n.prototype.composeOptional=function(n){return this.compose(n)},n.prototype.composeTraversal=function(n){return sr(V(this,Qt,ur(n)))},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeLens=function(n){return ar(V(this,Vt(V(n,jt))))},n.prototype.composePrism=function(n){return ar(V(this,Vt(V(n,tr))))},n.prototype.composeIso=function(n){return ar(V(this,Vt(V(n,bt))))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),dr=function(){function n(n){this.modifyF=n,this._tag="Traversal"}return n.prototype.modify=function(n){return ir(n)(this)},n.prototype.set=function(n){return function(n){return ir((function(){return n}))}(n)(this)},n.prototype.filter=function(n){return sr(function(n){return ur(rt(it(n)))}(n)(this))},n.prototype.asFold=function(){var n=this;return new gr((function(t){return function(r){return n.modifyF(dn(t))((function(n){return hn(r(n))}))}}))},n.prototype.asSetter=function(){var n=this;return new Or((function(t){return n.modify(t)}))},n.prototype.compose=function(n){return sr(ur(n)(this))},n.prototype.composeTraversal=function(n){return this.compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeOptional=function(n){return this.compose(n.asTraversal())},n.prototype.composeLens=function(n){return sr(V(this,ur(V(n,Gt))))},n.prototype.composePrism=function(n){return sr(V(this,ur(V(n,rr))))},n.prototype.composeIso=function(n){return sr(V(this,ur(V(n,Et))))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),yr=function(){function n(n){this.get=n,this._tag="Getter"}return n.prototype.asFold=function(){var n=this;return new gr((function(){return function(t){return function(r){return t(n.get(r))}}}))},n.prototype.compose=function(t){var r=this;return new n((function(n){return t.get(r.get(n))}))},n.prototype.composeGetter=function(n){return this.compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeLens=function(n){return this.compose(n.asGetter())},n.prototype.composeIso=function(n){return this.compose(n.asGetter())},n.prototype.composeTraversal=function(n){return this.asFold().compose(n.asFold())},n.prototype.composeOptional=function(n){return this.asFold().compose(n.asFold())},n.prototype.composePrism=function(n){return this.asFold().compose(n.asFold())},n}(),gr=function(){function n(n){this.foldMap=n,this._tag="Fold",this.getAll=n({concat:function(n,t){return n.concat(t)},empty:[]})(vn),this.exist=n(Sn),this.all=n(wn),this.foldMapFirst=n(z())}return n.prototype.compose=function(t){var r=this;return new n((function(n){return function(e){return r.foldMap(n)(t.foldMap(n)(e))}}))},n.prototype.composeFold=function(n){return this.compose(n)},n.prototype.composeGetter=function(n){return this.compose(n.asFold())},n.prototype.composeTraversal=function(n){return this.compose(n.asFold())},n.prototype.composeOptional=function(n){return this.compose(n.asFold())},n.prototype.composeLens=function(n){return this.compose(n.asFold())},n.prototype.composePrism=function(n){return this.compose(n.asFold())},n.prototype.composeIso=function(n){return this.compose(n.asFold())},n.prototype.find=function(n){return this.foldMapFirst(x(n))},n.prototype.headOption=function(n){return this.find((function(){return!0}))(n)},n}(),Or=function(){function n(n){this.modify=n,this._tag="Setter"}return n.prototype.set=function(n){return this.modify(e(n))},n.prototype.compose=function(t){var r=this;return new n((function(n){return r.modify(t.modify(n))}))},n.prototype.composeSetter=function(n){return this.compose(n)},n.prototype.composeTraversal=function(n){return this.compose(n.asSetter())},n.prototype.composeOptional=function(n){return this.compose(n.asSetter())},n.prototype.composeLens=function(n){return this.compose(n.asSetter())},n.prototype.composePrism=function(n){return this.compose(n.asSetter())},n.prototype.composeIso=function(n){return this.compose(n.asSetter())},n}(),wr={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.AnonymousSelect=Sr.NamedSelect=Sr.Not=Sr.Guard=Sr.PatternKind=void 0,Sr.PatternKind=Symbol("@ts-pattern/pattern-kind"),Sr.Guard=Symbol("@ts-pattern/guard"),Sr.Not=Symbol("@ts-pattern/not"),Sr.NamedSelect=Symbol("@ts-pattern/named-select"),Sr.AnonymousSelect=Symbol("@ts-pattern/anonymous-select");var Fr={};!function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.instanceOf=n.select=n.ANONYMOUS_SELECT_KEY=n.not=n.when=void 0;const t=Sr;n.when=n=>({[t.PatternKind]:t.Guard,[t.Guard]:n});n.not=n=>({[t.PatternKind]:t.Not,[t.Not]:n}),n.ANONYMOUS_SELECT_KEY="@ts-pattern/__anonymous-select-key",n.select=function(n){return void 0===n?{[t.PatternKind]:t.AnonymousSelect}:{[t.PatternKind]:t.NamedSelect,[t.NamedSelect]:n}};n.instanceOf=t=>n.when(function(n){return t=>t instanceof n}(t))}(Fr);var _r={};Object.defineProperty(_r,"__esModule",{value:!0}),_r.__=void 0;const Pr=Fr;const br=Pr.when((function(n){return!0})),Er=Pr.when((function(n){return"string"==typeof n})),Nr=Pr.when((function(n){return"number"==typeof n&&!Number.isNaN(n)})),xr=Pr.when((function(n){return"boolean"==typeof n})),jr=Pr.when((function(n){return null==n}));_r.__=Object.assign(br,{string:Er,number:Nr,boolean:xr,nullish:jr}),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isMatching=n.match=n.instanceOf=n.select=n.not=n.when=n.__=void 0;const t=Sr,r=Fr;Object.defineProperty(n,"when",{enumerable:!0,get:function(){return r.when}}),Object.defineProperty(n,"not",{enumerable:!0,get:function(){return r.not}}),Object.defineProperty(n,"select",{enumerable:!0,get:function(){return r.select}}),Object.defineProperty(n,"instanceOf",{enumerable:!0,get:function(){return r.instanceOf}});const e=_r;Object.defineProperty(n,"__",{enumerable:!0,get:function(){return e.__}});n.match=n=>o(n,[]);const o=(n,t)=>{const e=()=>{const r=t.find((({test:t})=>t(n)));if(!r){let t;try{t=JSON.stringify(n)}catch(r){t=n}throw new Error(`Pattern matching error: no pattern matches value ${t}`)}return r.handler(r.select(n),n)};return{with(...e){const u=e[e.length-1],c=[],f=[];for(let n=0;n<e.length-1;n++){const t=e[n];"function"==typeof t?f.push(t):c.push(t)}let a={};return o(n,t.concat([{test:n=>Boolean(c.some((t=>i(t,n,((n,t)=>{a[n]=t}))))&&f.every((t=>t(n)))),handler:u,select:n=>Object.keys(a).length?void 0!==a[r.ANONYMOUS_SELECT_KEY]?a[r.ANONYMOUS_SELECT_KEY]:a:n}]))},when:(r,e)=>o(n,t.concat([{test:r,handler:e,select:n=>n}])),otherwise:r=>o(n,t.concat([{test:()=>!0,handler:r,select:n=>n}])).run(),exhaustive:()=>e(),run:e}},u=n=>Boolean(n&&"object"==typeof n),i=(n,o,c)=>{if(u(n)){if((f=n)&&f[t.PatternKind]===t.Guard)return Boolean(n[t.Guard](o));if((n=>n&&n[t.PatternKind]===t.NamedSelect)(n))return c(n[t.NamedSelect],o),!0;if((n=>n&&n[t.PatternKind]===t.AnonymousSelect)(n))return c(r.ANONYMOUS_SELECT_KEY,o),!0;if((n=>n&&n[t.PatternKind]===t.Not)(n))return!i(n[t.Not],o,c);if(!u(o))return!1;if(Array.isArray(n)){if(!Array.isArray(o))return!1;if(1===n.length){const t={},r=(n,r)=>{t[n]=(t[n]||[]).concat([r])},e=o.every((t=>i(n[0],t,r)));return e&&Object.keys(t).forEach((n=>c(n,t[n]))),e}return n.length===o.length&&n.every(((n,t)=>i(n,o[t],c)))}if(n instanceof Map)return o instanceof Map&&[...n.keys()].every((t=>i(n.get(t),o.get(t),c)));if(n instanceof Set){if(!(o instanceof Set))return!1;if(0===n.size)return 0===o.size;if(1===n.size){const[t]=[...n.values()];return Object.values(e.__).includes(t)?i([t],[...o.values()],c):o.has(t)}return[...n.values()].every((n=>o.has(n)))}return Object.keys(n).every((t=>t in o&&i(n[t],o[t],c)))}var f;return o===n};n.isMatching=function(...n){if(1===n.length){const[t]=n;return n=>i(t,n,(()=>{}))}if(2===n.length){const[t,r]=n;return i(t,r,(()=>{}))}throw new Error(`isMatching wasn't given enough arguments: expected 1 or 2, received ${n.length}.`)}}(wr);var Gr,Mr=function(n){return"boolean"==typeof n&&!n};!function(n){n.FormatterPath="hansjhoffman.nix.config.nixFormatPath",n.FormatOnSave="hansjhoffman.nix.config.formatOnSave",n.FormatDocument="hansjhoffman.nix.commands.formatDocument"}(Gr||(Gr={}));var kr=function(n,t){var r,e,o=n.document.path;return r=function(){return new Promise((function(n,r){var e=new Process("/usr/bin/env",{args:[""+t,""+o]});e.onDidExit((function(t){return 0===t?n():r()})),e.start()}))},e=function(){return{_tag:"invokeFormatterError",reason:nova.localize("Failed to format the document")+"."}},function(){return r().then(v,(function(n){return m(e(n))}))}},Ir={workspace:{formatOnSave:i(K(nova.workspace.config.get(Gr.FormatOnSave)),k((function(n){return T(cn.decode(n))})),R((function(){return!1}))),formatterPath:i(K(nova.workspace.config.get(Gr.FormatterPath)),k((function(n){return T(un.decode(n))})),k(x((function(n){return Mr(Q(n))}))))},global:{formatOnSave:i(K(nova.config.get(Gr.FormatOnSave)),k((function(n){return T(cn.decode(n))})),R((function(){return!1}))),formatterPath:i(K(nova.config.get(Gr.FormatterPath)),k((function(n){return T(un.decode(n))})),k(x((function(n){return Mr(Q(n))}))))}},Tr=lr.fromPath()(["workspace"]),Lr=lr.fromPath()(["global"]),Ar=new CompositeDisposable,Rr=new Map,Ur=function(n){var t=Tr.get(n),r=Lr.get(n);return t.formatOnSave||r.formatOnSave},Kr=function(n){i(K(n.document.syntax),k(x((function(n){return W.equals(n,"nix")}))),A(o,(function(t){Rr=D(W)(n.document.uri,n.onWillSave(zr))(Rr)})))},Cr=function(){var n;i(Rr,(n=function(n){return n.dispose()},function(t){return q(t,n)})),Rr=new Map},zr=function(n){i(function(n){var t=Tr.get(n),r=Lr.get(n);return i(t.formatterPath,I((function(){return r.formatterPath})))}(Ir),A((function(){return console.log(nova.localize("Skipping")+"... "+nova.localize("No formatter set")+".")}),(function(t){kr(n,t)().then(P((function(n){return wr.match(n).with({_tag:"invokeFormatterError"},(function(n){var t=n.reason;return console.error(t)})).exhaustive()}),(function(){return console.log(nova.localize("Formatted")+" "+n.document.path)})))})))};exports.activate=function(){console.log(nova.localize("Activating")+"..."),function(n){if(nova.inDevMode()){var t=new NotificationRequest("nix-nova-notification");t.title=nova.extension.name,t.body=n,nova.notifications.add(t)}}(nova.localize("Starting extension")+"..."),Ar.add(nova.workspace.onDidAddTextEditor((function(n){Ur(Ir)&&Kr(n)}))),Ar.add(nova.commands.register(Gr.FormatDocument,zr)),Ar.add(nova.workspace.config.onDidChange(Gr.FormatterPath,(function(t,r){Ir=Tr.modify((function(r){return n(n({},r),{formatterPath:T(un.decode(t))})}))(Ir),Ur(Ir)&&(Cr(),nova.workspace.textEditors.forEach(Kr))}))),Ar.add(nova.workspace.config.onDidChange(Gr.FormatOnSave,(function(t,r){Ir=Tr.modify((function(r){return n(n({},r),{formatOnSave:i(cn.decode(t),b((function(){return!1})))})}))(Ir);var e=Ur(Ir);Cr(),e&&nova.workspace.textEditors.forEach(Kr)}))),Ar.add(nova.config.onDidChange(Gr.FormatterPath,(function(t,r){Ir=Lr.modify((function(r){return n(n({},r),{formatterPath:T(un.decode(t))})}))(Ir),Ur(Ir)&&(Cr(),nova.workspace.textEditors.forEach(Kr))}))),Ar.add(nova.config.onDidChange(Gr.FormatOnSave,(function(t,r){Ir=Lr.modify((function(r){return n(n({},r),{formatOnSave:i(cn.decode(t),b((function(){return!1})))})}))(Ir);var e=Ur(Ir);Cr(),e&&nova.workspace.textEditors.forEach(Kr)}))),console.log(nova.localize("Activated")+" 🎉")},exports.deactivate=function(){console.log(nova.localize("Deactivating")+"..."),Cr(),Ar.dispose()};
//# sourceMappingURL=main.cjs.min.js.map
